<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 405 Term Project: Thermal Imaging Nerf Turret: src/Panning.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME 405 Term Project: Thermal Imaging Nerf Turret<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">A library that contains software used to control and fire an automated Nerf turret. The turret uses a MLX90640 Thermal Imaging camera to determine opponent&#39;s position and fire.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_panning_8py.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">Panning.py File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file contains a program that runs three separate tasks which take thermal images of the MLX90640 and control two motors: a positioning motor and a pusher motor.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a06a9a4c625a7cf497fcc4e8c55abf224" id="r_a06a9a4c625a7cf497fcc4e8c55abf224"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a06a9a4c625a7cf497fcc4e8c55abf224">src.Panning.motor_control</a> (shares)</td></tr>
<tr class="memdesc:a06a9a4c625a7cf497fcc4e8c55abf224"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task returns spur gear the housing blaster assembly to its home position using a limit switch.  <br /></td></tr>
<tr class="separator:a06a9a4c625a7cf497fcc4e8c55abf224"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8eb490f29fe9afa30070f0d222a58a36" id="r_a8eb490f29fe9afa30070f0d222a58a36"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8eb490f29fe9afa30070f0d222a58a36">src.Panning.pusher_control</a> (shares)</td></tr>
<tr class="memdesc:a8eb490f29fe9afa30070f0d222a58a36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task that controls a pusher motor which pushes darts from a magazine into flywheels.  <br /></td></tr>
<tr class="separator:a8eb490f29fe9afa30070f0d222a58a36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad699c60f0194c47c27139ad3f44006f4" id="r_ad699c60f0194c47c27139ad3f44006f4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad699c60f0194c47c27139ad3f44006f4">src.Panning.camera</a> (shares)</td></tr>
<tr class="memdesc:ad699c60f0194c47c27139ad3f44006f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task that uses the MLX90640 thermal camera driver classes to take an image.  <br /></td></tr>
<tr class="separator:ad699c60f0194c47c27139ad3f44006f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a0e8b54ecfdafb0cb4cb65b66dae4e6d1" id="r_a0e8b54ecfdafb0cb4cb65b66dae4e6d1"><td class="memItemLeft" align="right" valign="top"><a id="a0e8b54ecfdafb0cb4cb65b66dae4e6d1" name="a0e8b54ecfdafb0cb4cb65b66dae4e6d1"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>src.Panning.share0</b> = task_share.Share('H', thread_protect=False, name=&quot;Share 0&quot;)</td></tr>
<tr class="separator:a0e8b54ecfdafb0cb4cb65b66dae4e6d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4bef3d3600f7e0c50e4f9cd81e259c9" id="r_aa4bef3d3600f7e0c50e4f9cd81e259c9"><td class="memItemLeft" align="right" valign="top"><a id="aa4bef3d3600f7e0c50e4f9cd81e259c9" name="aa4bef3d3600f7e0c50e4f9cd81e259c9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>src.Panning.share1</b> = task_share.Share('H', thread_protect=False, name=&quot;Share 1&quot;)</td></tr>
<tr class="separator:aa4bef3d3600f7e0c50e4f9cd81e259c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab33290ab1338e95af99e02f58b95406a" id="r_ab33290ab1338e95af99e02f58b95406a"><td class="memItemLeft" align="right" valign="top"><a id="ab33290ab1338e95af99e02f58b95406a" name="ab33290ab1338e95af99e02f58b95406a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>src.Panning.share2</b> = task_share.Share('H', thread_protect=False, name=&quot;Share 2&quot;)</td></tr>
<tr class="separator:ab33290ab1338e95af99e02f58b95406a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8f52adf0203205c45c6ec19b597829c" id="r_ab8f52adf0203205c45c6ec19b597829c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab8f52adf0203205c45c6ec19b597829c">src.Panning.motor_control</a></td></tr>
<tr class="separator:ab8f52adf0203205c45c6ec19b597829c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6db46f00f68dc63936e1385159c3b35b" id="r_a6db46f00f68dc63936e1385159c3b35b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6db46f00f68dc63936e1385159c3b35b">src.Panning.pusher_control</a></td></tr>
<tr class="separator:a6db46f00f68dc63936e1385159c3b35b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e9549c4c3f5ed86eba5b0df0a5fd695" id="r_a0e9549c4c3f5ed86eba5b0df0a5fd695"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0e9549c4c3f5ed86eba5b0df0a5fd695">src.Panning.camera</a></td></tr>
<tr class="separator:a0e9549c4c3f5ed86eba5b0df0a5fd695"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains a program that runs three separate tasks which take thermal images of the MLX90640 and control two motors: a positioning motor and a pusher motor. </p>
<p>The program uses cotask.py and task_share.py to execute cooperative multi-tasking between these three tasks at different periods. The file was modified from basic_task.py from the ME405 library that was originally written by Dr. Ridgely. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ad699c60f0194c47c27139ad3f44006f4" name="ad699c60f0194c47c27139ad3f44006f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad699c60f0194c47c27139ad3f44006f4">&#9670;&#160;</a></span>camera()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.Panning.camera </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>shares</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task that uses the MLX90640 thermal camera driver classes to take an image. </p>
<p>The get_csv function of the mlx_cam class has been modified to store all pixel data in a list. In state 1, this list is iterated through, determining which column of pixels in the thermal image has the highest total temperature. The majority of code implemented in this task has been implemented from the test script in the mlx_cam class written by Dr. Ridgely. </p>

</div>
</div>
<a id="a06a9a4c625a7cf497fcc4e8c55abf224" name="a06a9a4c625a7cf497fcc4e8c55abf224"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06a9a4c625a7cf497fcc4e8c55abf224">&#9670;&#160;</a></span>motor_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.Panning.motor_control </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>shares</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task returns spur gear the housing blaster assembly to its home position using a limit switch. </p>
<p>It subsequently awaits a button push on PC13 to begin the sequence of events which fires the blaster at a human target. In order, this sequence includes a state which waits for 5 seconds, a controller step response to aim at the target, a controller step response to turn away from the target, and blaster assembly homing. </p>

</div>
</div>
<a id="a8eb490f29fe9afa30070f0d222a58a36" name="a8eb490f29fe9afa30070f0d222a58a36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8eb490f29fe9afa30070f0d222a58a36">&#9670;&#160;</a></span>pusher_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.Panning.pusher_control </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>shares</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task that controls a pusher motor which pushes darts from a magazine into flywheels. </p>
<p>Pusher motor is triggered when the doShoot flag is set in the motor_control task. Motor turns off when the pusher motor limit switch is triggered so that only one dart is fired. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a0e9549c4c3f5ed86eba5b0df0a5fd695" name="a0e9549c4c3f5ed86eba5b0df0a5fd695"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e9549c4c3f5ed86eba5b0df0a5fd695">&#9670;&#160;</a></span>camera</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.Panning.camera</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  cotask.Task(camera, name=<span class="stringliteral">&quot;Camera Task&quot;</span>, priority=3, period=20,</div>
<div class="line"><span class="lineno">    2</span>                        profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>, shares = (share0, share1, share2))</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab8f52adf0203205c45c6ec19b597829c" name="ab8f52adf0203205c45c6ec19b597829c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8f52adf0203205c45c6ec19b597829c">&#9670;&#160;</a></span>motor_control</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.Panning.motor_control</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  cotask.Task(motor_control, name=<span class="stringliteral">&quot;Motor Control Task&quot;</span>, priority=2, period=10,</div>
<div class="line"><span class="lineno">    2</span>                        profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>, shares = (share0, share1, share2))</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6db46f00f68dc63936e1385159c3b35b" name="a6db46f00f68dc63936e1385159c3b35b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6db46f00f68dc63936e1385159c3b35b">&#9670;&#160;</a></span>pusher_control</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">src.Panning.pusher_control</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  cotask.Task(pusher_control, name=<span class="stringliteral">&quot;Pusher Motor Control Task&quot;</span>, priority=1, period=10,</div>
<div class="line"><span class="lineno">    2</span>                        profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>, shares = (share0, share1, share2))</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="_panning_8py.html">Panning.py</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
